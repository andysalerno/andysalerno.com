<!doctype html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> 4.2 Gigabytes, or: How to Draw Anything - ‚å®Ô∏èü§∑üèª‚Äç‚ôÇÔ∏èüì∑ </title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="referrer" content="no-referrer">
    <meta name="description" content="" />
    <meta property="og:site_name" content="‚å®Ô∏èü§∑üèª‚Äç‚ôÇÔ∏èüì∑" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://andys.page/posts/how-to-draw/" />
    <meta property="og:title" content="4.2 Gigabytes, or: How to Draw Anything" />
    <meta property="og:image" content="https://andys.page/" />
    <meta property="og:description" content="" />

    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:title" content="4.2 Gigabytes, or: How to Draw Anything" />
    <meta name="twitter:description" content="" />
    <meta name="twitter:image" content="https://andys.page/" />

    <link rel="canonical" href="https://andys.page/posts/how-to-draw/">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous" />

    <link rel="stylesheet" href="https://andys.page/css/custom.css" />

    

    

    <link rel="shortcut icon"
        href="https://andys.page/images/favicon.png">

    
    <link href="https://andys.page/index.xml" rel="alternate" type="application/rss+xml" title="‚å®Ô∏èü§∑üèª‚Äç‚ôÇÔ∏èüì∑" />
    
</head>

<body>
    
<script data-goatcounter="https://andysalerno.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
<script src="/js/shuffle-message.js" defer></script>
<div class="mt-xl header">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-auto">
                <a href="https://andys.page/">
                    <h1 class="name">Andy, xor Andrew</h1>
                </a>
                <h8 class="tagline"><i>Professional software developer / hobbyist street photographer <span class="bonusTagline"></span>
                        <noscript> / Respects your js-disabled browsing</noscript> <span class="blinker"></span></i>
                </h8>
            </div>
        </div>

        <div class="row justify-content-center">
            <ul class="nav nav-primary">
                
                <li class="nav-item">
                    <a class="nav-link" href="/">
                        
                        Home
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/about/">
                        
                        About
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/andysalerno">
                        
                        GitHub
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/gallery/">
                        
                        Photo gallery
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="https://www.flickr.com/photos/andysalerno/">
                        
                        Flickr
                    </a>
                </li>
                
                <li class="nav-item">
                    <a class="nav-link" href="/index.xml">
                        
                        Rss (there are dozens of us!)
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

<div id="myModal" class="myModal">
    <div class="flex-row">
        <i class=" myModal-content caption" id="modal-count">Click to view</i>
    </div>
    
    <div class="flex-row img-row">
        <div class="img-row-arrow-col">
            <div class="flex-pusher" onclick="goBackPrevImage()"></div>
            <div id="leftArrow" class="myModal-content caption img-row-arrow" onclick="goBackPrevImage()">&lt;</div>
            <div class="flex-pusher" onclick="goBackPrevImage()"></div>
        </div>
        <img class="myModal-content" id="modal-img" onclick="advanceNextImage()">
        <div class="img-row-arrow-col">
            <div class="caption close-button flex-pusher" onclick="closeModal()">X</div>
            <div class="flex-pusher-08" onclick="advanceNextImage()"></div>
            <div id="rightArrow" class="myModal-content caption img-row-arrow" onclick="advanceNextImage()">&gt;</div>
            <div class="flex-pusher" onclick="advanceNextImage()"></div>
        </div>
    </div>
    
</div>

<script src="/js/modal.js"></script>

<div class="content">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-sm-12 col-lg-8">
                <h1 class="mx-0 mx-md-4">4.2 Gigabytes, or: How to Draw Anything</h1>
                <div class="meta-date mx-0 mx-md-4">
                    <time>2022/08/30</time>
                </div>
                <div class="markdown">
                    
    <blockquote>
<p>In our world, we can do anything that we want to do here. Any old thing.<br>
- <em>Bob Ross, The Joy Of Painting Season 29 Episode 1</em></p>
</blockquote>
<p>Watching a vibrant Seattle sunset the other day, my imagination started running. The otherworldly hue of the sky evoked something from science fiction. The hazy orange-purple was mesmerizing.</p>
<p>I envisioned a massive, alien object hovering over a long-abandoned Seattle, with a burning orange sky, and buildings overgrown as nature reclaimed the city.</p>
<p>Later that night, I spent a few hours creating the following image:</p>
<figure><img src="assets/step15.png"/>
</figure>

<p>You&rsquo;ll have to forgive the somewhat low resolution - my GPU only has 12GB of memory, unfortunately.</p>
<p>Since I&rsquo;m clearly a highly-skilled artist with literally dozens of minutes of experience, I thought I would share with you how I created the above masterpiece.</p>
<h3 id="step-1-the-sky">Step 1: the sky</h3>
<p>Let&rsquo;s start with that burning orange sky. A nice little gradient will do.</p>
<figure><img src="assets/step1.png"/>
</figure>

<p>I think that looks nice. It matches the hues in my mental image.</p>
<h2 id="step-2-the-ground">Step 2: the ground</h2>
<p>Now we need the ground. We&rsquo;ll be creating a nice old city scene, but I like to start with green for the ground, and cover it up with buildings later.</p>
<figure><img src="assets/step2.png"/>
</figure>

<h2 id="step-3-the-background">Step 3: the background</h2>
<p>There are two things any image of Seattle needs: the Space Needle, and Mount Rainier.</p>
<p>Let&rsquo;s get that friendly mountain in there.</p>
<figure><img src="assets/step3.png"/>
</figure>

<p>Beautiful.</p>
<h2 id="step-4-the-foreground">Step 4: the foreground</h2>
<p>I think some nice warm fall colors would be great for livening up the foreground. Let&rsquo;s add those somewhere near the bottom.</p>
<figure><img src="assets/step4.png"/>
</figure>

<p>It&rsquo;s okay if these blobs don&rsquo;t look perfectly like trees. We can always change our minds about what we want them to be later.</p>
<blockquote>
<p>The big thing that we try to teach you here is to enjoy what you&rsquo;re doing and have fun.<br>
- <em>Bob Ross, The Joy Of Painting Season 14 Episode 1</em></p>
</blockquote>
<h2 id="step-5-the-city">Step 5: the city</h2>
<p>Now lets get those buildings in there, as many as you feel like.</p>
<p>I like to offset the Space Needle a bit so it contrasts with Mount Rainier.</p>
<figure><img src="assets/step5.png"/>
</figure>

<p>This is really coming along nicely.</p>
<h2 id="step-6-stable-diffusion-round-1">Step 6: stable diffusion round 1</h2>
<p>Now that we have our beautiful rough drawing, let&rsquo;s run it through Stable Diffusion img2img and get ourselves a nice output.</p>
<p>I recommend you sample a few different seeds, and pick whichever one you like most.</p>
<p>It can be best to start simple. Instead of overwhelming the prompt with our full request (Alien spaceship, burning orange sky, overgrown buildings) let&rsquo;s just get a happy little painting of Seattle that we&rsquo;ll build on top of. You can keep the ddim_steps low, around 50. We&rsquo;ll crank that up more toward the end.</p>
<blockquote>
<p>scripts/img2img.py &ndash;n_samples 1 &ndash;n_iter 1 &ndash;prompt &ldquo;Digital fantasy painting of the Seattle city skyline. Vibrant fall trees in the foreground. Space Needle visible. Mount Rainier in background. Highly detailed.&rdquo; &ndash;ddim_steps 50 &ndash;seed 47004 &ndash;scale 7 &ndash;strength 0.80 &ndash;init-img step5.png</p>
</blockquote>
<figure><img src="assets/step6c.png"/>
</figure>

<p>I like this output, but I&rsquo;m not too happy about the Space Needle drifting left.  Since it seems to float around with different seeds, let&rsquo;s just keep it, and later on pick a seed that positions it better.</p>
<blockquote>
<p>We don&rsquo;t make mistakes. We have happy accidents.<br>
- <em>Bob Ross, The Joy Of Painting Season 3 Episode 5</em></p>
</blockquote>
<p>My preference is to give a high &ldquo;strength&rdquo; value in the first round, to really let Stable Diffusion use its imagination. If it goes too wild (for instance, by adding multiple copies of the Space Needle), tone down the strength.</p>
<p>This can take some experimentation, and not all seeds will give perfect results. In my experience, if you try ~10 seeds, you&rsquo;ll probably have one or two that you really like.</p>
<h2 id="step-7-make-it-post-apocalyptic">Step 7: make it post apocalyptic</h2>
<p>Now let&rsquo;s take this beautiful city and turn it into ruins.</p>
<p>Since the previous image is very clearly the Seattle skyline, we can de-emphasize &ldquo;Seattle&rdquo; in the next prompt. We&rsquo;ll still mention it, to prevent Stable Diffusion from drifting too far, but more emphasis will be given to the newly-introduced part, which is the &ldquo;post-apocalyptic&rdquo; aspect.</p>
<blockquote>
<p>scripts/img2img.py &ndash;n_samples 1 &ndash;n_iter 1 &ndash;prompt &ldquo;Digital Matte painting. Hyper detailed. City in ruins. Post-apocalyptic, crumbling buildings. Science fiction. Seattle skyline. Golden hour, dusk. Beautiful sky at sunset. High quality digital art. Hyper realistic.&rdquo; &ndash;ddim_steps 100 &ndash;seed 47200 &ndash;scale 9 &ndash;strength 0.80 &ndash;init-img inputs\step6.png</p>
</blockquote>
<figure><img src="assets/step9b.png"/>
</figure>

<p>Right away you&rsquo;ll notice a few things:</p>
<p>The Space Needle moved back to its rightful home, around the 1/3rd line of the image.</p>
<p>Mount Rainier is gone, and so are the trees from the foreground.</p>
<p>If we wanted to keep those, we could.  Simply update the prompt to mention those things, and perhaps turn down the &ldquo;strength&rdquo; property to 0.70, to prevent Stable Diffusion from taking too many creative liberties.</p>
<p>However, I quite like this &ldquo;creative choice&rdquo; by Stable Diffusion. From this viewpoint, the trees would be out of place. And there&rsquo;s so much haze that Mount Rainier would certainly not be visible. Plus, the warm color of the trees became an eerie glow, and the green ground became overgrowth. So I find this change to be an improvement.</p>
<h4 id="a-brief-note-about-prompts">A brief note about prompts</h4>
<p>If you browse around any community focused on image generation, you&rsquo;ll notice many (most?) prompts will invoke the name of a real artist.</p>
<p>For example, <a href="https://lexica.art/prompt/99d4c030-38d4-4846-a7da-aadb5659fbe3">this creation</a>, which uses the prompt:</p>
<blockquote>
<p>gigantic extraterrestrial futuristic alien ship landed on  the kingdom of Julius Caesar, roman historic works in brand new condition, not ruins, hyper-detailed, artstation trending, world renowned artists, historic artworks society, antique renewel, good contrast, realistic color ,cgsociety, by <strong>greg rutkowski,gustave dore</strong>, Deviantart</p>
</blockquote>
<p>(emphasis mine)</p>
<p>It seems like adding the names of specific artists <strong>really does</strong> improve the output.</p>
<p>However, I feel a bit uneasy doing this. Is it illegal? Certainly not. Is it unethical? &hellip;<em>probably</em> not?  But it still feels a bit wrong to me, somehow.</p>
<p>The outputs from this model are <em>so good</em> that a reasonable person searching for &ldquo;Greg Rutkowski&rsquo;s art&rdquo; might stumble upon results that include both genuine and AI-generated works. And I feel like I don&rsquo;t want to contribute to that. In fact, given that an AI model can create a Greg Rutkowski lookalike in moments, while a <em>real</em> Greg Rutkowski probably takes many hours of work, it&rsquo;s not hard to imagine that one day soon, a search for his work will yield <em>more</em> AI-generated images than real ones. This is a bit off putting to me.</p>
<p>To be sure, one day soon this tech will be so ubiquitous that people would <em>expect</em> to see AI-generated images in that search result. But as it stands, I&rsquo;d prefer to let Stable Diffusion create art without guiding it to copying a specific artist.</p>
<p>Yes, this is a quaint concern, given how this tech can and will be used for much, much worse things. But here in August 2022, I&rsquo;ll leave the artists out of it.</p>
<p>Having said this, the next section may seem hypocritical, since I explicitly guide the model to build something like a Star Wars ship. In this case, I believe Star Wars has been so engrained into popular culture over the last 40+ years, that using its likeness for inspiration is not a sin.</p>
<h2 id="step-8-the-spaceship">Step 8: the spaceship</h2>
<p>Here&rsquo;s our creation again:</p>
<figure><img src="assets/step9b.png"/>
</figure>

<p>You might be tempted to draw the spaceship directly on the output.</p>
<p>And I encourage you to try that! Have fun and experiment.</p>
<p>But from what I&rsquo;ve learned, Stable Diffusion isn&rsquo;t great at &ldquo;mixing&rdquo; different qualities. It gets confused if you have an immaculately rendered Space Needle and a childish MS-paint spaceship in the same image.</p>
<p>So let&rsquo;s keep working in layers and compose the image little by little.</p>
<p>Here&rsquo;s my amazing spaceship:</p>
<figure><img src="assets/step7.png"/>
</figure>

<p>Apologies to George Lucas :)</p>
<p>It will serve as a great starting point, and we can evolve on the idea from there.</p>
<figure><img src="assets/step8.png"/>
</figure>

<blockquote>
<p>scripts/img2img.py &ndash;n_samples 1 &ndash;n_iter 1 &ndash;prompt &ldquo;Digital fantasy science fiction painting of a Star Wars Imperial Class Star Destroyer. Highly detailed, white background.&rdquo; &ndash;ddim_steps 50 &ndash;seed 47001 &ndash;scale 7 &ndash;strength 0.80 &ndash;init-img step7.png</p>
</blockquote>
<p>Now let&rsquo;s simply drop the spaceship directly on the image:</p>
<figure><img src="assets/step10b.png"/>
</figure>

<p>Looks a bit out of place. So let&rsquo;s &ldquo;smooth it out&rdquo; by running through Stable Diffusion again.</p>
<h2 id="step-9-stable-diffusion-pass-2">Step 9: stable diffusion pass 2:</h2>
<p>This pass through Stable Diffusion will do two things:</p>
<ul>
<li>blend the ship into the image</li>
<li>re-interpret the ship given the context of the image</li>
</ul>
<p>If you were very attached to the exact ship from step 8, you could run the pass with a very low strength, to prevent Stable Diffusion from changing it too much.</p>
<p>However, I enjoy turning the strength to around 0.80 and seeing what it comes up with. It has a tendency to surprise me by showing me something better than what I had envisioned.</p>
<p>So let&rsquo;s run this through a few seeds and see what we get.</p>
<p>In my output, I got some images with a great ship, some images with a great city, but no images with a great ship <em>and</em> a great city.</p>
<p>Great city, so-so ship:</p>
<figure><img src="assets/step11.png"/>
</figure>

<p>Great ship, so-so city:</p>
<figure><img src="assets/step11b.png"/>
</figure>

<p>So&hellip; let&rsquo;s just combine them!</p>
<blockquote>
<p>On this canvas, you&rsquo;re the creator, so you make the decision to put whatever you want in your world.<br>
- <em>Bob Ross, The Joy Of Painting Season 10 Episode 12</em></p>
</blockquote>
<p>We&rsquo;ll take the awesome ship, paste it onto the awesome city, and run a pass with low strength to blend them without changing either one too much.</p>
<p>Here&rsquo;s the &ldquo;combined&rdquo; image from a quick and dirty gimp session:</p>
<figure><img src="assets/step12.png"/>
</figure>

<p>While we&rsquo;re here editing in gimp, maybe it would be nice to add some happy little birds flying into the distance, right in the middle of the image.</p>
<p>So let&rsquo;s extract that part of the image, and draw some birds on it:</p>
<figure><img src="assets/step14a.png"/>
</figure>

<p>Then let Stable Diffusion do its magic:</p>
<figure><img src="assets/step14b.png"/>
</figure>

<blockquote>
<p>scripts/img2img.py &ndash;n_samples 1 &ndash;n_iter 1 &ndash;prompt &ldquo;Digital Matte painting. Hyper detailed. Brds fly into the horizon. Golden hour, dusk. Beautiful sky at sunset. High quality digital art. Hyper realistic.&rdquo; &ndash;ddim_steps 50 &ndash;seed 47407 &ndash;scale 9 &ndash;strength 0.75 &ndash;init-img step14a.png</p>
</blockquote>
<p>Put it all together in one copy-pasted composite:</p>
<figure><img src="assets/step14c.png"/>
</figure>

<p>And finally, one last pass at low strength to blend it all together, creating our masterpiece:</p>
<figure><img src="assets/step15.png"/>
</figure>

<blockquote>
<p>scripts/img2img.py &ndash;n_samples 1 &ndash;n_iter 1 &ndash;prompt &ldquo;Digital Matte painting. Hyper detailed. City in ruins. Post-apocalyptic, crumbling buildings. Science fiction. Seattle skyline. Star Wars Imperial Star Destroyer hovers. Birds fly in the distance. Golden hour, dusk. Beautiful sky at sunset. High quality digital art. Hyper realistic.&rdquo; &ndash;ddim_steps 100 &ndash;seed 47413 &ndash;scale 9 &ndash;strength 0.20 &ndash;init-img step14c.png</p>
</blockquote>
<p>Notice the low strength - 0.20 is all it takes to blend everything together nicely.</p>
<h2 id="final-thoughts">Final thoughts</h2>
<p>Don&rsquo;t worry, the Bob Ross bit is over now. I barely stuck to it anyway. Please don&rsquo;t ctrl+f &ldquo;nice&rdquo;.</p>
<p>Anyway.</p>
<p>4.2 gigabytes.</p>
<p><em><strong>4.2 gigabytes.</strong></em></p>
<p>That&rsquo;s the size of the model that has made this recent explosion possible.</p>
<p>4.2 gigabytes of floating points that somehow encode so much of what we know.</p>
<p>Yes, I&rsquo;m waxing poetic here. No, I am not heralding the arrival of AGI, or our AI overlords. I am simply admiring the beauty of it, while it is fresh and new.</p>
<p>Because it won&rsquo;t be fresh and new for long. This thing I&rsquo;m feeling is not much different from how I felt using email for the first time - &ldquo;Grandma got my message already? In <em>Florida</em>? In seconds?&rdquo;  It was the nearest thing to magic my child-self had ever seen. Now email is the most boring and mundane part of my day.</p>
<p>There is already much talk about practical uses. Malicious uses. Downplaying. Up playing. Biases. Monetization. Democratization - which is really just monetization with a more marketable name.</p>
<p>I&rsquo;m not trying to get into any of that here. I&rsquo;m just thinking about those 4.2 gigabytes. How small it seems, in today&rsquo;s terms. Such a little bundle that holds so much.</p>
<p>How many images, both real photos and fictional art, were crammed through the auto-encoder, that narrower and narrower funnel of information, until some sort of meaning was distilled from them? How many times must a model be taught to de-noise an image until it understands what makes a tiger different from a leopard? I guess now we know.</p>
<p>And now I suppose we ride the wave until this new magic is both as widely used, and boring, as email. So it goes.</p>



                </div>
            </div>
        </div>
    </div>
</div>




    

    

    

    
    
</body>

</html>
